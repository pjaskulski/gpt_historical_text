""" openai test """

import os
from pathlib import Path
from dotenv import load_dotenv
import openai



env_path = Path(".") / ".env"
load_dotenv(dotenv_path=env_path)

OPENAI_ORG_ID = os.environ.get('OPENAI_ORG_ID')
OPENAI_API_KEY = os.environ.get('OPENAI_API_KEY')

openai.api_key = OPENAI_API_KEY

response = openai.Completion.create(
  model="text-davinci-003",
  prompt="From this text extract information about parents, wife, children and grandchildren for the person Ludwik Mortęski:\n\n Mortęski (de Mortangen) Ludwik h. własnego (zm. 1539), kasztelan gdański, potem elbląski. Prawdopodobnie był synem woj. chełmińskiego Ludwika (zob.) i Anny. W r. 1492 M. brał udział w poselstwie stanów Prus Królewskich do króla Kazimierza Jagiellończyka jako przedstawiciel szlachty. Poselstwo przebywało w Wilnie w dn. 10–18 II 1492 i miało na celu zapośredniczenie ugody między królem a bpem warmińskim Łukaszem Watzenrode. Król nie chciał uznać wyboru Watzenrodego na to biskupstwo i misja posłów zakończyła się fiaskiem. W dn. 21–24 IV 1493 uczestniczył M. w zjeździe stanów Prus Królewskich w Dzierzgoniu. Na zjeździe stanów Prus Królewskich z przedstawicielami króla Aleksandra Jagiellończyka w dn. 4–19 VII 1503 w Malborku występował M. jako podkomorzy chełmiński. Począwszy od tego momentu zaczął M. odgrywać pewną rolę polityczną na zjazdach stanów pruskich. I tak w końcu 1506 r. został M. jednym z delegatów stanów pruskich na elekcję króla polskiego. Z kolei 3 IX 1507 stany pruskie postanowiły wysłać M-ego do bpa pomezańskiego Hioba von Dobenecka, aby domagał się on położenia tamy napadom dokonywanym w Prusach Królewskich przez rozbójników z terytorium państwa krzyżackiego. Wpierw jednak udał się M., wraz z Jerzym Bażyńskim, do bpa warmińskiego Watzenrodego z prośbą o radę w tej sprawie. Kiedy M. i Bażyński byli w drodze, przyszły listy od Watzenrodego, aby odwołać planowane poselstwo do Dobenecka. Na zjeździe stanów w dniach od 30 X 1507 do 4 I 1508 w Malborku został wybrany M. na posła do króla. Dn. 18 I 1508 uczestniczył M. w sejmie w Krakowie, a na zjeździe w Malborku w dn. od 28 V do 8 VI 1508 złożył sprawozdanie ze swego poselstwa do króla Zygmunta I. Ponownie miał udać się M. do króla jako poseł stanów pruskich na wiosnę 1509, ale z tej misji zrezygnował. Następnie wiosną 1511 znów miał jechać do króla, tym razem w sprawie pozwu cesarskiego skierowanego do Gdańska i Elbląga. Na pewno pojechał do króla w październiku 1511. Miał wyjawić królowi przyczyny odroczenia uchwały podatkowej, a równocześnie poprzeć starania Torunia o prawo składu i prosić o opiekę dla elblążan narażonych na napaści ze strony krzyżackiej. M. w czasie tego poselstwa zyskał chyba zaufanie Zygmunta I, skoro ten upoważnił go 24 X 1511 do odebrania pieniędzy od gdańszczan oraz do rozmów z elblążanami w sprawie podatku. Na zjeździe w dn. 4–7 XII 1511 w Grudziądzu M. przedstawił zebranym stanom odpowiedź królewską na jego poselstwo. M. był obrońcą swobód szlacheckich, a w jego wypowiedziach w czasie obrad zjazdów stanów pruskich można odnaleźć także akcenty antymiejskie. I tak na zjeździe odbywanym w dn. 10–16 IX 1507 w Elblągu M. skarżył się na pociąganie rycerstwa do odpowiedzialności sądowej przez miasta na podstawie oskarżeń «ludzi nikczemnych». Atakował również miasta za ustalanie wygórowanych cen na towary rzemieślnicze. Stąd też opowiedział się za ordynacją krajową z 2 VI 1511, uchwaloną przez stany pruskie w Gdańsku. Na zjeździe w dn. 4–7 XII 1511 w Grudziądzu M. domagał się, aby małe miasta nie uchylały się od płacenia podatku na rzecz króla. M. znajdował się w r. 1509 w opozycji wobec wojewodów: chełmińskiego Jana Dąbrowskiego (zm. w r. 1513) i pomorskiego Mikołaja Wulkowskiego (zm. w r. 1509), oskarżając ich o spowodowanie rozdźwięku wśród stanów pruskich, co ułatwić miało zakusy zakonu krzyżackiego wobec Prus Królewskich. Dn. 1 IV 1512 objął M. kasztelanię gdańską po Mikołaju Szpocie z Krajewa. Na wieść o śmierci bpa warmińskiego Watzenrodego rycerstwo ziemi chełmińskiej wysłało M-ego i licencjata Filipa Holkenera, kanclerza bpa chełmińskiego Jana Konopackiego, do kapituły warmińskiej z żądaniem, aby uzgodniła wybór nowego biskupa z królem. M. był też przewidziany na członka poselstwa stanów pruskich do króla, jakie miano odprawić latem 1512. Jako kasztelan gdański brał M. udział w licznych komisjach powoływanych przez króla dla rozstrzygania spraw spornych na terenie Prus Królewskich. Dn. 4 III 1516 przeszedł M. na kasztelanię elbląską (po zmarłym Janie Wulkowskim) i trzymał ją do śmierci. Na sejmiku w listopadzie 1530 w Malborku powiedział, iż Prusy Królewskie winny mocno trzymać się swoich przywilejów i nie dać ich «pomieszać» z przywilejami koronnymi («Privilegia feste gehalten und mit Polen nicht vermischt halten»). W czasie sporu rady pruskiej z podskarbim pruskim Stanisławem Kostką w l. 1533–6 M. należał do przeciwników Kostki. Dziedziczny majątek M-ego stanowiły Czaple koło Świecia i Mortęgi (Mortąg) pod Lubawą. Wspólnie z Hektorem Machwicem trzymał M. nadto królewski zamek Radzyń w ziemi chełmińskiej, który w r. 1495 wykupił od nich Jan Dąbrowski, kasztelan chełmiński, oraz królewszczyznę Miruchów w woj. pomorskim, wykupiony w r. 1512 przez Jana Potwinora. W r. 1505 otrzymał M. starostwo pokrzywnickie, a w r. 1521 Zygmunt Stary w nagrodę za służbę wojskową nadał M-emu i jego synowi, także Ludwikowi, zamek Pokrzywno wraz ze wsiami Okonin, Nicwałd, Węgrowo, Skarszewo, Nowawieś i Wiewiórki jako lenno na prawie feudalnym. Dn. 3 IV 1539 M. dokonał podziału swych dóbr pomiędzy żonę i dzieci. M. zmarł w r. 1539, przed 20 VI, kiedy to kasztelanem elbląskim został Jan Sokołowski. Z małżeństwa z Elżbietą z Dąbrówki zostawił M. córki: Katarzynę, Dorotę, Gertrudę, Elżbietę i Małgorzatę, oraz dwóch synów: Ludwika i Melchiora (zm. 1587), miecznika ziem pruskich, podkomorzego pomorskiego (1562–8), następnie malborskiego (1568–87), ożenionego z Elżbietą Kostczanką, córką woj. chełmińskiego Stanisława (zob.); Melchior był ojcem Magdaleny Mortęskiej (zob.) i Ludwika, woj. chełmińskiego.",
  temperature=0.5,
  max_tokens=500,
  top_p=1.0,
  frequency_penalty=0.8,
  presence_penalty=0.0
)

print(response['choices'][0]['text'])